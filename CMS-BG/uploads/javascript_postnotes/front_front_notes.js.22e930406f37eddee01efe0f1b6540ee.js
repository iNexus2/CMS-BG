;(function($,_,undefined){"use strict";ips.controller.register('postnotes.front.add',{initialize:function(){this.on('submit',this.add);},add:function(e){e.preventDefault();e.stopPropagation();var form=$(this.scope);var url=form.attr('action');var self=this;var dialog=ips.ui.dialog.getObj($('#postId'+form.find('[name=post_id]').val()));if(typeof dialog!=='undefined'){dialog.setLoading(true);}
ips.getAjax()(url,{type:'post',showLoading:(typeof dialog==='undefined')?true:false,data:form.serialize(),dataType:'json'}).done(function(response){if(typeof dialog!=='undefined'){dialog.remove(true);var note=$('#postNotes'+form.find('[name=post_id]').val()).append(response);ips.utils.anim.go('fadeIn',note);}
return false;});}});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.register('postnotes.front.notes',{initialize:function(){this.on(document,'click','[data-action="deleteNote"]',this.delete);},delete:function(e){e.preventDefault();var note=$(e.currentTarget).parent();var url=$(e.currentTarget).attr('href');ips.ui.alert.show({type:'confirm',icon:'fa fa-warning',message:ips.getString('delete_confirm'),callbacks:{ok:function(){ips.getAjax()(url,{type:'get',dataType:'json'}).done(function(response){if(response.deleted)
{ips.utils.anim.go('fadeOutDown',note);}})}}});}});}(jQuery,_));;